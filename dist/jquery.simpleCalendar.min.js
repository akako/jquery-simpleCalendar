/**
 * @author Akihito Kako <akakopublic@gmail.com>
 * @license MIT License
 * @version 1.0.3
 */
"use strict";(function(a){var b=function(l,k,m){var c=[];var e=new Date(l,k-1,1);var g=new Date(l,k,0);var d=1+m-e.getDay();var f=new Date(l,k-1,d);var h=new Date(l,k-1,g.getDate()+(6+m-g.getDay()));for(var j=d+1;f<=h;j++){c.push({date:f,active:e<=f&&f<=g});f=new Date(l,k-1,j)}return c};a.fn.simpleCalendar=function(f){var k=a(this);var s=new Date();var t={year:s.getFullYear(),month:s.getMonth()+1,headers:["SUN","MON","TUE","WED","THU","FRI","SAT"],tableClass:"simpleCalendar",cellClass:{},firstDayOfTheWeek:0,previousClick:undefined,nextClick:undefined,cellClick:undefined,previousMonthLimit:undefined,nextMonthLimit:undefined,currentMonthFormatter:function(i){return i.getFullYear()+"/"+("0"+(i.getMonth()+1)).slice(-2)},previousMonthFormatter:function(i){return"< "+("0"+(i.getMonth()+1)).slice(-2)},nextMonthFormatter:function(i){return("0"+(i.getMonth()+1)).slice(-2)+" >"}};if(typeof(f)!=="object"){f=t}else{for(var w in t){if(undefined===f[w]){f[w]=t[w]}}}var l=new Date(f.year,f.month-1,1);f.year=l.getFullYear();f.month=l.getMonth()+1;k.empty();var p=a("<table />").addClass(f.tableClass).appendTo(a(this));var e=a("<tr />").appendTo(p);var h=a("<td />").attr("colspan",7).appendTo(e);var v=a("<div />").addClass("controller").appendTo(h);if(f.previousMonthLimit===undefined||f.previousMonthLimit>0){a("<div />").addClass("prev").append(f.previousMonthFormatter(new Date(f.year,f.month-2,1))).bind("click",function(){f.month--;f.year+=Math.floor((f.month+12)/12)-1;f.month=f.month%12;if(f.previousMonthLimit!==undefined){f.previousMonthLimit--}if(f.nextMonthLimit!==undefined){f.nextMonthLimit++}if(typeof(f.previousClick)==="function"){var i=f.previousClick(f);if(i===false){return}else{if(typeof(i)==="object"){f=i}}}k.simpleCalendar(f)}).appendTo(v)}if(f.nextMonthLimit===undefined||f.nextMonthLimit>0){a("<div />").addClass("next").append(f.nextMonthFormatter(new Date(f.year,f.month,1))).bind("click",function(){f.month++;f.year+=Math.floor((f.month+12)/12)-1;f.month=f.month%12;if(f.previousMonthLimit!==undefined){f.previousMonthLimit++}if(f.nextMonthLimit!==undefined){f.nextMonthLimit--}if(typeof(f.nextClick)==="function"){var i=f.nextClick(f);if(i===false){return}else{if(typeof(i)==="object"){f=i}}}k.simpleCalendar(f)}).appendTo(v)}a("<div />").addClass("current").append(f.currentMonthFormatter(new Date(f.year,f.month-1,1))).appendTo(v);var q=a("<tr />").appendTo(p);for(var o=0;o<f.headers.length;o++){a("<th />").append(f.headers[(o+f.firstDayOfTheWeek)%f.headers.length]).appendTo(q)}var m=b(f.year,f.month,f.firstDayOfTheWeek);for(var o=0;o<m.length;o++){var r=m[o];if(r.date.getDay()===f.firstDayOfTheWeek){var g=a("<tr />").appendTo(p)}var c=a("<td />").append(r.date.getDate()).addClass(r.active?"active":"inactive").appendTo(g);if(r.active){if(r.date.getDay()===0){c.addClass("sunday")}else{if(r.date.getDay()===6){c.addClass("saturday")}}if(r.date.getFullYear()===s.getFullYear()&&r.date.getMonth()===s.getMonth()&&r.date.getDate()===s.getDate()){c.addClass("today")}if(typeof(f.cellClick)==="function"){c.bind("click",{date:r.date},f.cellClick)}for(var d in f.cellClass){var u=f.cellClass[d];for(var n=0;n<u.length;n++){if(u[n].toString()===r.date.toString()){c.addClass(d)}}}}}}})(jQuery);